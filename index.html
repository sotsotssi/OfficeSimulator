<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤í”¼ìŠ¤ ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f3f4f6; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Logs */
        .log-entry { margin-bottom: 8px; padding: 8px; border-radius: 6px; background: white; border-left: 4px solid #ddd; font-size: 0.9rem; }
        .log-news-good { border-left-color: #ef4444; background: #fef2f2; } /* Stock Up (Red in KR) */
        .log-news-bad { border-left-color: #3b82f6; background: #eff6ff; } /* Stock Down (Blue in KR) */
        .log-news-neutral { border-left-color: #9ca3af; background: #f3f4f6; }
        .log-work-success { border-left-color: #10b981; }
        .log-work-fail { border-left-color: #ef4444; }
        .log-collab-success { border-left-color: #8b5cf6; background: #f5f3ff; }
        .log-collab-fail { border-left-color: #6d28d9; background: #ede9fe; }
        .log-love { border-left-color: #ec4899; background: #fdf2f8; }
        .log-system { border-left-color: #6b7280; background: #e5e7eb; font-weight: bold; }
        
        /* Map Styles */
        .company-building { background: #fff; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden; min-width: 160px; }
        .floor { border-bottom: 1px solid #f0f0f0; padding: 4px; min-height: 45px; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 4px; }
        .floor-label { font-size: 0.7rem; color: #9ca3af; width: 100%; text-align: center; }
        .char-icon { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; color: white; cursor: pointer; position: relative; user-select: none; }
        .char-status { position: absolute; bottom: -2px; right: -2px; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; }
        
        /* Editable Input */
        .editable-input { background: transparent; border: 1px solid white; color: white; text-align: center; width: 100%; font-weight: bold; font-size: 0.875rem; }
        .editable-input:focus { outline: none; border-bottom: 1px solid #e5e7eb; background: rgba(255,255,255,0.2); }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
        .modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 500px; border-radius: 8px; }
        
        .scroll-hide::-webkit-scrollbar { display: none; }
        .scroll-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm p-4 flex justify-between items-center z-10">
        <div>
            <h1 class="font-bold text-xl text-indigo-600"><i class="fa-solid fa-building"></i> ì˜¤í”¼ìŠ¤ ì‹œë®¬ë ˆì´í„° <a href="https://x.com/bb_uu_t" target="_blank"><span class="text-xs font-normal text-slate-500 dark:text-slate-400 ml-1">@bb_uu_t</span></a></h1>
            <p class="text-xs text-gray-500">Day <span id="day-display">1</span></p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-hidden relative bg-gray-100">
        
        <!-- Tabs Navigation -->
        <div class="flex bg-white border-b border-gray-200 overflow-x-auto">
            <button onclick="switchTab('roster')" class="flex-1 py-3 px-2 text-sm font-medium text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors tab-btn active-tab whitespace-nowrap" data-tab="roster">
                <i class="fa-solid fa-users mb-1 block"></i> ëª…ë‹¨ê´€ë¦¬
            </button>
            <button onclick="switchTab('map')" class="flex-1 py-3 px-2 text-sm font-medium text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors tab-btn whitespace-nowrap" data-tab="map">
                <i class="fa-solid fa-building mb-1 block"></i> íšŒì‚¬ ë§µ
            </button>
            <button onclick="switchTab('logs')" class="flex-1 py-3 px-2 text-sm font-medium text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors tab-btn whitespace-nowrap" data-tab="logs">
                <i class="fa-solid fa-list-check mb-1 block"></i> ë¡œê·¸
            </button>
            <button onclick="switchTab('settings')" class="flex-1 py-3 px-2 text-sm font-medium text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors tab-btn whitespace-nowrap" data-tab="settings">
                <i class="fa-solid fa-floppy-disk mb-1 block"></i> ì„¤ì •
            </button>
        </div>

        <!-- Tab: Roster -->
        <div id="roster" class="tab-content active h-full overflow-y-auto pb-32 p-4">
            <div class="bg-white p-4 rounded-lg shadow mb-4">
                <h2 class="font-bold mb-2 text-sm text-gray-600">ì‹ ê·œ ì±„ìš© (ìµœëŒ€ 30ëª…)</h2>
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <input type="text" id="new-name" placeholder="ì´ë¦„" class="border p-2 rounded text-sm w-full">
                    <select id="new-mbti" class="border p-2 rounded text-sm w-full">
                        <option value="">MBTI ì„ íƒ</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <select id="new-company" class="border p-2 rounded text-sm w-full">
                        <!-- Options generated by JS -->
                    </select>
                    <select id="new-rank" class="border p-2 rounded text-sm w-full">
                        <!-- Options generated by JS -->
                    </select>
                </div>
                <button onclick="addCharacter()" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition">ì±„ìš©í•˜ê¸°</button>
            </div>
            <div class="text-xs text-gray-400 mb-2 text-right">* ì‚¬ì› ì¹´ë“œë¥¼ ë”ë¸”í´ë¦­í•˜ì—¬ ìƒì„¸ ì¹œë°€ë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>
            <div id="roster-list" class="space-y-2">
                <!-- Character cards go here -->
            </div>
        </div>

        <!-- Tab: Map -->
        <div id="map" class="tab-content h-full overflow-auto pb-32 p-4">
            <div class="flex items-center justify-center mb-4 space-x-4">
                <button onclick="changeCompanyCount(-1)" class="w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-gray-600 font-bold shadow">-</button>
                <span class="text-sm font-bold text-gray-600">íšŒì‚¬ ìˆ˜ ì¡°ì ˆ</span>
                <button onclick="changeCompanyCount(1)" class="w-8 h-8 rounded-full bg-indigo-100 hover:bg-indigo-200 flex items-center justify-center text-indigo-600 font-bold shadow">+</button>
            </div>
            <div class="text-xs text-gray-400 mb-2 text-center">* íšŒì‚¬ ì´ë¦„ì„ ë”ë¸”í´ë¦­í•˜ë©´ ì‚¬ëª…ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            
            <div class="w-full overflow-x-auto pb-4">
                <div class="flex justify-center space-x-4 h-full items-start min-w-max px-2" id="map-container">
                    <!-- Buildings go here -->
                </div>
            </div>
        </div>

        <!-- Tab: Logs -->
        <div id="logs" class="tab-content h-full overflow-y-auto pb-32 p-4"> <!-- Added pb-32 for mobile toolbar safety -->
            <div class="flex justify-between items-center mb-2">
                <h3 class="font-bold text-gray-700">ì—…ë¬´ ì¼ì§€</h3>
                <button onclick="clearLogs()" class="text-xs text-gray-400 hover:text-gray-600">ê¸°ë¡ ì‚­ì œ</button>
            </div>
            <div id="log-container" class="space-y-2">
                <div class="log-entry log-system">ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤. ìºë¦­í„°ë¥¼ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚ ë¡œ ì§„í–‰í•´ë³´ì„¸ìš”!</div>
            </div>
        </div>

        <!-- Tab: Settings (Save/Load) -->
        <div id="settings" class="tab-content h-full overflow-y-auto pb-32 p-4">
            <h2 class="font-bold text-lg text-gray-700 mb-4">ì„¤ì • ë° ì €ì¥</h2>
            
            <!-- Basic Save/Load -->
            <div class="bg-white p-4 rounded-lg shadow mb-4 border-l-4 border-indigo-500">
                <h3 class="font-bold text-gray-800 mb-2">ğŸ“‚ ê¸°ë³¸ ë°ì´í„° (ëª…ë‹¨/íšŒì‚¬)</h3>
                <p class="text-xs text-gray-500 mb-3">íšŒì‚¬ ëª©ë¡ê³¼ ì‚¬ì› ëª…ë‹¨(ì´ë¦„, MBTI, ì§ê¸‰)ë§Œ ì €ì¥í•©ë‹ˆë‹¤.<br>ì§„í–‰ ìƒí™©(ì¹œë°€ë„, ê²½í—˜ì¹˜ ë“±)ì€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì‹œë®¬ë ˆì´ì…˜ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.</p>
                
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <button onclick="saveData('basic')" class="bg-indigo-100 text-indigo-700 py-2 rounded hover:bg-indigo-200 font-bold text-sm">
                        <i class="fa-solid fa-save"></i> ë¸Œë¼ìš°ì € ì €ì¥
                    </button>
                    <button onclick="loadData('basic')" class="bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 font-bold text-sm">
                        <i class="fa-solid fa-upload"></i> ë¸Œë¼ìš°ì € ë¡œë“œ
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="exportJSON('basic')" class="bg-gray-100 text-gray-700 py-2 rounded hover:bg-gray-200 font-bold text-sm border">
                        <i class="fa-solid fa-file-export"></i> JSON ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button onclick="importJSON('basic')" class="bg-gray-600 text-white py-2 rounded hover:bg-gray-700 font-bold text-sm">
                        <i class="fa-solid fa-file-import"></i> JSON ë¶ˆëŸ¬ì˜¤ê¸°
                    </button>
                </div>
            </div>

            <!-- Full Save/Load -->
            <div class="bg-white p-4 rounded-lg shadow mb-4 border-l-4 border-green-500">
                <h3 class="font-bold text-gray-800 mb-2">ğŸ’¾ ì „ì²´ ë°ì´í„° (ì§„í–‰ìƒí™© í¬í•¨)</h3>
                <p class="text-xs text-gray-500 mb-3">í˜„ì¬ ë‚ ì§œ, ì‚¬ì› ê°„ ì¹œë°€ë„ ë“± ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ë‹¨, ë¡œê·¸ëŠ” ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>ì¤‘ë‹¨í–ˆë‹¤ê°€ ì´ì–´ì„œ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.</p>
                
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <button onclick="saveData('full')" class="bg-green-100 text-green-700 py-2 rounded hover:bg-green-200 font-bold text-sm">
                        <i class="fa-solid fa-save"></i> ë¸Œë¼ìš°ì € ì €ì¥
                    </button>
                    <button onclick="loadData('full')" class="bg-green-600 text-white py-2 rounded hover:bg-green-700 font-bold text-sm">
                        <i class="fa-solid fa-upload"></i> ë¸Œë¼ìš°ì € ë¡œë“œ
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="exportJSON('full')" class="bg-gray-100 text-gray-700 py-2 rounded hover:bg-gray-200 font-bold text-sm border">
                        <i class="fa-solid fa-file-export"></i> JSON ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button onclick="importJSON('full')" class="bg-gray-600 text-white py-2 rounded hover:bg-gray-700 font-bold text-sm">
                        <i class="fa-solid fa-file-import"></i> JSON ë¶ˆëŸ¬ì˜¤ê¸°
                    </button>
                </div>
            </div>

            <div class="text-center mt-8">
                <button onclick="if(confirm('ì •ë§ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) { localStorage.clear(); location.reload(); }" class="text-xs text-red-400 underline">
                    ë°ì´í„° ì™„ì „ ì´ˆê¸°í™”
                </button>
            </div>
        </div>

    </main>

    <!-- Affinity Modal -->
    <div id="affinity-modal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="font-bold text-lg">ì¸ë§¥ í˜„í™©</h3>
                <span onclick="closeModal()" class="cursor-pointer text-gray-500 text-xl">&times;</span>
            </div>
            <div id="modal-body" class="overflow-y-auto max-h-64">
                <!-- Affinity table content -->
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fixed bottom-6 right-6 z-50">
        <button onclick="nextDay()" class="bg-indigo-600 hover:bg-indigo-700 text-white rounded-full w-16 h-16 shadow-lg flex items-center justify-center text-2xl transition transform hover:scale-105 active:scale-95">
            <i class="fa-solid fa-forward"></i>
        </button>
        <div class="text-center mt-1 text-xs font-bold text-indigo-800 bg-white/80 rounded px-1">ë‹¤ìŒ ë‚ </div>
    </div>

<script>

// --- Constants & Data ---

const MBTI_TYPES = [
    "ISTJ", "ISFJ", "INFJ", "INTJ", "ISTP", "ISFP", "INFP", "INTP",
    "ESTP", "ESFP", "ENFP", "ENTP", "ESTJ", "ESFJ", "ENFJ", "ENTJ"
];

const COMPATIBILITY_DATA = {
    "INFP": { "ENFJ": 5, "ENTJ": 5, "INFP": 4, "ENFP": 4, "INFJ": 4, "INTJ": 4, "INTP": 4, "ENTP": 4, "ISFP": 1, "ESFP": 1, "ISTP": 1, "ESTP": 1, "ISFJ": 1, "ESFJ": 1, "ISTJ": 1, "ESTJ": 1 },
    "ENFP": { "INFJ": 5, "INTJ": 5, "INFP": 4, "ENFP": 4, "ENFJ": 4, "ENTJ": 4, "INTP": 4, "ENTP": 4, "ISFP": 1, "ESFP": 1, "ISTP": 1, "ESTP": 1, "ISFJ": 1, "ESFJ": 1, "ISTJ": 1, "ESTJ": 1 },
    "INFJ": { "ENFP": 5, "ENTP": 5, "INFP": 4, "INFJ": 4, "ENFJ": 4, "INTJ": 4, "INTP": 4, "ENTJ": 4, "ISFP": 1, "ESFP": 1, "ISTP": 1, "ESTP": 1, "ISFJ": 1, "ESFJ": 1, "ISTJ": 1, "ESTJ": 1 },
    "ENFJ": { "INFP": 5, "ISFP": 5, "ENFP": 4, "INFJ": 4, "ENFJ": 4, "INTJ": 4, "INTP": 4, "ENTP": 4, "ENTJ": 4, "ESFP": 1, "ISTP": 1, "ESTP": 1, "ISFJ": 1, "ESFJ": 1, "ISTJ": 1, "ESTJ": 1 },
    "INTJ": { "ENFP": 5, "ENTP": 5, "INFP": 4, "INFJ": 4, "ENFJ": 4, "INTJ": 4, "INTP": 4, "ENTJ": 4, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ISFJ": 2, "ESFJ": 2, "ISTJ": 3, "ESTJ": 3 },
    "ENTJ": { "INFP": 5, "INTP": 5, "ENFP": 4, "INFJ": 4, "ENFJ": 4, "INTJ": 4, "ENTP": 4, "ENTJ": 4, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ISFJ": 2, "ESFJ": 2, "ISTJ": 3, "ESTJ": 3 },
    "INTP": { "ENTJ": 5, "ESTJ": 5, "INFP": 4, "ENFP": 4, "INFJ": 4, "INTJ": 4, "INTP": 4, "ENTP": 4, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ISFJ": 2, "ESFJ": 2, "ISTJ": 2, "ENFJ": 2 },
    "ENTP": { "INFJ": 5, "INTJ": 5, "INFP": 4, "ENFP": 4, "ENFJ": 4, "INTP": 4, "ENTP": 4, "ENTJ": 4, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ISFJ": 2, "ESFJ": 2, "ISTJ": 2, "ESTJ": 2 },
    "ISFP": { "ESFJ": 5, "ESTJ": 5, "ENFJ": 5, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ISFJ": 3, "ISTJ": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ESFP": { "ISFJ": 5, "ISTJ": 5, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ESFJ": 3, "ESTJ": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ISTP": { "ESFJ": 5, "ESTJ": 5, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ISFJ": 3, "ISTJ": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ESTP": { "ISFJ": 5, "ISTJ": 5, "ISFP": 3, "ESFP": 3, "ISTP": 3, "ESTP": 3, "ESFJ": 3, "ESTJ": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ISFJ": { "ESFP": 5, "ESTP": 5, "ISFJ": 4, "ESFJ": 4, "ISTJ": 4, "ESTJ": 4, "ISFP": 3, "ISTP": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ESFJ": { "ISFP": 5, "ISTP": 5, "ISFJ": 4, "ESFJ": 4, "ISTJ": 4, "ESTJ": 4, "ESFP": 3, "ESTP": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ISTJ": { "ESFP": 5, "ESTP": 5, "ISFJ": 4, "ESFJ": 4, "ISTJ": 4, "ESTJ": 4, "ISFP": 3, "ISTP": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "INTP": 2, "ENTP": 2 },
    "ESTJ": { "ISFP": 5, "ISTP": 5, "INTP": 5, "ISFJ": 4, "ESFJ": 4, "ISTJ": 4, "ESTJ": 4, "ESFP": 3, "ESTP": 3, "INFP": 1, "ENFP": 1, "INFJ": 1, "ENFJ": 1, "INTJ": 2, "ENTJ": 2, "ENTP": 2 }
};

const RANKS = [
    { title: "ì‚¬ì›", salary: 3000000, limit: 100 },
    { title: "ëŒ€ë¦¬", salary: 4000000, limit: 200 },
    { title: "ê³¼ì¥", salary: 5000000, limit: 350 },
    { title: "ì°¨ì¥", salary: 6500000, limit: 500 },
    { title: "ë¶€ì¥", salary: 8000000, limit: 700 },
    { title: "ì´ì‚¬", salary: 12000000, limit: 9999 }
];

const COLORS = [
    { bg: "bg-red-500", text: "text-red-500", light: "bg-red-50", border: "border-red-500" },
    { bg: "bg-blue-500", text: "text-blue-500", light: "bg-blue-50", border: "border-blue-500" },
    { bg: "bg-green-500", text: "text-green-500", light: "bg-green-50", border: "border-green-500" },
    { bg: "bg-yellow-500", text: "text-yellow-500", light: "bg-yellow-50", border: "border-yellow-500" },
    { bg: "bg-purple-500", text: "text-purple-500", light: "bg-purple-50", border: "border-purple-500" },
    { bg: "bg-gray-500", text: "text-gray-500", light: "bg-gray-50", border: "border-gray-500" },
    { bg: "bg-indigo-500", text: "text-indigo-500", light: "bg-indigo-50", border: "border-indigo-500" },
    { bg: "bg-pink-500", text: "text-pink-500", light: "bg-pink-50", border: "border-pink-500" }
];

// ----------------------------------------------------------------------
// ë‰´ìŠ¤ ë°ì´í„° (NEWS_DATA)
// ----------------------------------------------------------------------
const NEWS_DATA = [
    // [Good] ê¸ì •ì  ë‰´ìŠ¤
    { text: "ì •ë¶€ê°€ ëŒ€ê·œëª¨ IT ì§€ì› ì •ì±…ì„ ë°œí‘œí–ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "í•´ì™¸ ì‹œì¥ ê°œì²™ ì„±ê³µ ì†Œì‹ì´ ë“¤ë ¤ì˜µë‹ˆë‹¤.", type: "good" },
    { text: "ì†Œë¹„ì ì‹ ë¢° ì§€ìˆ˜ê°€ ì—­ëŒ€ ìµœê³ ë¥¼ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ê²½ìŸì‚¬ì˜ ë¶€ë„ ì†Œì‹ìœ¼ë¡œ ë°˜ì‚¬ì´ìµì´ ê¸°ëŒ€ë©ë‹ˆë‹¤.", type: "good" },
    { text: "ì˜¬í•´ ê²½ì œ ì„±ì¥ë¥  ì „ë§ì¹˜ê°€ ìƒí–¥ ì¡°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ìŠ¤íƒ€íŠ¸ì—… íˆ¬ì ìœ ì¹˜ê°€ í™œë°œí•´ì§€ë©° ì‹œì¥ì— ëˆì´ ë•ë‹ˆë‹¤.", type: "good" },
    { text: "êµ­ì œ ìœ ê°€ í•˜ë½ìœ¼ë¡œ ìš´ì†¡ ë° ìƒì‚° ë¹„ìš©ì´ ì ˆê°ë©ë‹ˆë‹¤.", type: "good" },
    { text: "ìêµ­ì˜ ì½˜í…ì¸  ì—´í’ìœ¼ë¡œ êµ­ê°€ ë¸Œëœë“œ ê°€ì¹˜ê°€ ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ì—°ë§ ì†Œë¹„ ì‹œì¦Œì„ ë§ì•„ ìœ í†µì—…ê³„ ë§¤ì¶œì´ ê¸‰ì¦í–ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ì‹ ê¸°ìˆ  íŠ¹í—ˆ ë“±ë¡ ê±´ìˆ˜ê°€ ì‘ë…„ ëŒ€ë¹„ 20% ì¦ê°€í–ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ê¸°ì—… ê·œì œ ì™„í™” ì¡°ì¹˜ë¡œ ì‹ ê·œ ì‚¬ì—… ì§„ì¶œì´ ìš©ì´í•´ì¡ŒìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ì „ë ¥ ìˆ˜ê¸‰ì´ ì•ˆì •í™”ë˜ì–´ ì‚°ì—…ìš© ì „ê¸°ë£Œ ì¸í•˜ê°€ ë…¼ì˜ë©ë‹ˆë‹¤.", type: "good" },
    { text: "ì²­ë…„ ê³ ìš©ë¥ ì´ ìƒìŠ¹í•˜ì—¬ ë…¸ë™ ì‹œì¥ì— í™œë ¥ì´ ë•ë‹ˆë‹¤.", type: "good" },
    { text: "ì¹œí™˜ê²½ ì—ë„ˆì§€ ê¸°ìˆ  í˜ì‹ ìœ¼ë¡œ ë¹„ìš© ì ˆê°ì´ ì˜ˆìƒë©ë‹ˆë‹¤.", type: "good" },
    { text: "ì¤‘ì†Œê¸°ì—… ëŒ€ìƒ ì„¸ì œ í˜œíƒì´ í™•ëŒ€ë˜ì—ˆìŠµë‹ˆë‹¤.", type: "good" },
    { text: "ë¬¸í™” ì½˜í…ì¸  ìˆ˜ì¶œì•¡ì´ ì—­ëŒ€ ìµœê³ ì¹˜ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.", type: "good" },

    // [Bad] ë¶€ì •ì  ë‰´ìŠ¤
    { text: "ì›ìì¬ ê°€ê²© í­ë“±ìœ¼ë¡œ ë¹„ìš© ë¶€ë‹´ì´ ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ì„¸ê³„ì ì¸ ê²½ê¸° ì¹¨ì²´ ìš°ë ¤ê°€ ì œê¸°ë˜ì—ˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ìƒˆë¡œìš´ ê·œì œê°€ ê¸°ì—…ë“¤ì—ê²Œ ë¶€ë‹´ì„ ì£¼ê³  ìˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ì˜ˆìƒì¹˜ ëª»í•œ ë³´ì•ˆ ì´ìŠˆê°€ ì—…ê³„ì— í„°ì¡ŒìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ê¸€ë¡œë²Œ ë¬¼ë¥˜ ëŒ€ë€ìœ¼ë¡œ ë¶€í’ˆ ìˆ˜ê¸‰ì— ì°¨ì§ˆì´ ìƒê²¼ìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ê¸ˆë¦¬ ì¸ìƒìœ¼ë¡œ ì¸í•´ ê¸°ì—…ë“¤ì˜ ëŒ€ì¶œ ì´ì ë¶€ë‹´ì´ í½ë‹ˆë‹¤.", type: "bad" },
    { text: "ì£¼ìš” ìˆ˜ì¶œêµ­ì˜ ë¬´ì—­ ì¥ë²½ì´ ë†’ì•„ì ¸ ìˆ˜ì¶œê¸¸ì´ ë§‰í˜”ìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ì´ˆê°•ë ¥ íƒœí’ì´ ë¶ìƒí•˜ì—¬ ì‹œì„¤ë¬¼ í”¼í•´ê°€ ìš°ë ¤ë©ë‹ˆë‹¤.", type: "bad" },
    { text: "ì•Œ ìˆ˜ ì—†ëŠ” ì „ì‚°ë§ ë§ˆë¹„ ì‚¬íƒœê°€ ê³³ê³³ì—ì„œ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ì—…ê³„ ì „ë°˜ì— ê±¸ì¹œ ì¸ë ¥ë‚œìœ¼ë¡œ êµ¬ì¸ë‚œì´ ì‹¬í™”ë˜ì—ˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ì†Œë¹„ ì‹¬ë¦¬ ìœ„ì¶•ìœ¼ë¡œ ë‚´ìˆ˜ ì‹œì¥ì´ ì–¼ì–´ë¶™ê³  ìˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "í™˜ìœ¨ ë³€ë™ì„±ì´ ì»¤ì ¸ ê²½ì˜ ê³„íš ìˆ˜ë¦½ì— ì–´ë ¤ì›€ì´ í½ë‹ˆë‹¤.", type: "bad" },
    { text: "ì£¼ìš” ì›ìì¬ ìƒì‚°êµ­ì˜ ì •ì„¸ ë¶ˆì•ˆì´ ì§€ì†ë˜ê³  ìˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "êµ­ì œ í•´í‚¹ ê·¸ë£¹ì˜ ëœì„¬ì›¨ì–´ ê³µê²© í”¼í•´ê°€ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.", type: "bad" },
    { text: "ì´ìƒ ê¸°í›„ë¡œ ì¸í•œ ë†ì‘ë¬¼ í”¼í•´ë¡œ ë¬¼ê°€ê°€ ë“¤ì©ì…ë‹ˆë‹¤.", type: "bad" },
    { text: "ê¸€ë¡œë²Œ ê¸ˆìœµ ì‹œì¥ì˜ ë¶ˆí™•ì‹¤ì„±ì´ ìµœê³ ì¡°ì— ë‹¬í–ˆìŠµë‹ˆë‹¤.", type: "bad" },

    // [Neutral] ì¤‘ë¦½/ì •ë³´ì„± ë‰´ìŠ¤
    { text: "ì˜¤ëŠ˜ ì „êµ­ì ìœ¼ë¡œ ë¹„ê°€ ë‚´ë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.", type: "neutral" },
    { text: "êµ­íšŒì—ì„œ ìƒˆë¡œìš´ ë²•ì•ˆì´ ë…¼ì˜ ì¤‘ì…ë‹ˆë‹¤.", type: "neutral" },
    { text: "ê³„ì ˆì´ ë°”ë€Œë©° í™˜ì ˆê¸° ê°ê¸°ê°€ ìœ í–‰í•©ë‹ˆë‹¤.", type: "neutral" },
    { text: "í‰ë²”í•˜ê³  ì¡°ìš©í•œ í•˜ë£¨ê°€ ì˜ˆìƒë©ë‹ˆë‹¤.", type: "neutral" },
    { text: "ì„¸ê³„ì ì¸ ìŠ¤í¬ì¸  ì¶•ì œ ê°œë§‰ì´ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "ìƒˆë¡œìš´ ëŒ€ì¤‘êµí†µ ë…¸ì„ ì´ ê°œí†µë˜ì–´ ì¶œê·¼ê¸¸ì´ ë°”ë€ë‹ˆë‹¤.", type: "neutral" },
    { text: "ë²šê½ƒ ê°œí™” ì‹œê¸°ê°€ í‰ë…„ë³´ë‹¤ ë¹¨ë¼ì§ˆ ì „ë§ì…ë‹ˆë‹¤.", type: "neutral" },
    { text: "ì´ë²ˆ ì£¼ëŠ” ëŒ€ì²´ë¡œ ë§‘ì€ ë‚ ì”¨ê°€ ì´ì–´ì§€ê² ìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "ì„œì ê°€ì— ìê¸°ê³„ë°œì„œ ì—´í’ì´ ë¶ˆê³  ìˆìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "ì»¤í”¼ ì›ë‘ ê°€ê²© ë³€ë™ì— ëŒ€í•œ ë‰´ìŠ¤ê°€ ë³´ë„ë˜ì—ˆìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "ì§ì¥ì¸ ì ì‹¬ê°’ í‰ê· ì´ ì†Œí­ ìƒìŠ¹í–ˆë‹¤ëŠ” í†µê³„ì…ë‹ˆë‹¤.", type: "neutral" },
    { text: "ë‹¤ìŒ ì£¼ë¶€í„° ì¥ë§ˆê°€ ì‹œì‘ë  ì˜ˆì •ì…ë‹ˆë‹¤.", type: "neutral" },
    { text: "ë„ì‹¬ì§€ì— ëŒ€í˜• ë³µí•© ì‡¼í•‘ëª°ì´ ì˜¤í”ˆí•  ì˜ˆì •ì…ë‹ˆë‹¤.", type: "neutral" },
    { text: "ëŒ€ì¤‘êµí†µ ìš”ê¸ˆ ì¸ìƒì•ˆì— ëŒ€í•œ ê³µì²­íšŒê°€ ì—´ë ¸ìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "íœ´ê°€ì² ì„ ë§ì•„ ê³µí•­ì´ ì¸íŒŒë¡œ ë¶ë¹„ê³  ìˆìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "ë…ê° ì˜ˆë°© ì ‘ì¢… ê¸°ê°„ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.", type: "neutral" },
    { text: "ì£¼ë§ ë„ì‹¬ì§€ì—ì„œ ëŒ€ê·œëª¨ ë§ˆë¼í†¤ ëŒ€íšŒê°€ ì—´ë¦½ë‹ˆë‹¤.", type: "neutral" },
    { text: "ìœ ëª… í™”ê°€ì˜ ì „ì‹œíšŒê°€ ì‹œë‚´ ë¯¸ìˆ ê´€ì—ì„œ ê°œë§‰í–ˆìŠµë‹ˆë‹¤.", type: "neutral" }
];

// ----------------------------------------------------------------------
// ê°œì¸ ì—…ë¬´ ìŠ¤í¬ë¦½íŠ¸ (WORK_SCRIPTS)
// ----------------------------------------------------------------------
const WORK_SCRIPTS = [
    // 1~10
    { success: "ë©‹ì§„ ê¸°íšìœ¼ë¡œ íŒ€ì›ë“¤ì˜ ë°•ìˆ˜ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.", fail: "ê¸°íšì•ˆì´ ë°˜ë ¤ë˜ì–´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•´ì•¼ í•©ë‹ˆë‹¤." },
    { success: "ë²„ê·¸ë¥¼ í•œë²ˆì— ì°¾ì•„ë‚´ì–´ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.", fail: "ë²„ê·¸ë¥¼ ê³ ì¹˜ë ¤ë‹¤ ìƒˆë¡œìš´ ë²„ê·¸ë¥¼ 3ê°œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤." },
    { success: "í´ë¼ì´ì–¸íŠ¸ê°€ ê²°ê³¼ë¬¼ì— ë§¤ìš° ë§Œì¡±í–ˆìŠµë‹ˆë‹¤.", fail: "í´ë¼ì´ì–¸íŠ¸ê°€ í™”ë¥¼ ë‚´ë©° ì „í™”ë¥¼ ëŠì—ˆìŠµë‹ˆë‹¤." },
    { success: "íƒ•ë¹„ì‹¤ì—ì„œ ë§›ìˆëŠ” ê°„ì‹ì„ ë‚˜ëˆ  ë¨¹ìœ¼ë©° íë§í–ˆìŠµë‹ˆë‹¤.", fail: "íƒ•ë¹„ì‹¤ì— ê°„ì‹ì´ ë‹¤ ë–¨ì–´ì ¸ì„œ ìš°ìš¸í•´ì¡ŒìŠµë‹ˆë‹¤." },
    { success: "íšŒì˜ì—ì„œ ë‚¸ ì•„ì´ë””ì–´ê°€ ì±„íƒë˜ì—ˆìŠµë‹ˆë‹¤.", fail: "íšŒì˜ ì‹œê°„ ë‚´ë‚´ ë”´ìƒê°ì„ í•˜ë‹¤ ì§€ì ë°›ì•˜ìŠµë‹ˆë‹¤." },
    { success: "ë³µì‚¬ê¸°ê°€ ë§ì„ ì˜ ë“¤ì–´ì„œ ë¬¸ì„œ ì •ë¦¬ê°€ ë¹¨ë¦¬ ëë‚¬ìŠµë‹ˆë‹¤.", fail: "ë³µì‚¬ê¸°ì— ì¢…ì´ê°€ ê±¸ë ¤ì„œ ì˜¨ëª¸ì— ì‰í¬ê°€ ë¬»ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ê±°ë˜ì²˜ì™€ì˜ í˜‘ìƒì´ ì„±ê³µì ìœ¼ë¡œ ëë‚¬ìŠµë‹ˆë‹¤.", fail: "ê±°ë˜ì²˜ì™€ì˜ ë¯¸íŒ… ì¥ì†Œë¥¼ ì°©ê°í•˜ì—¬ ëŠ¦ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‚´ ë©”ì‹ ì €ë¡œ ì¬ë¯¸ìˆëŠ” ë†ë‹´ì„ ê³µìœ í•´ ë¶„ìœ„ê¸°ë¥¼ ë„ì› ìŠµë‹ˆë‹¤.", fail: "ì‚¬ë‚´ ë©”ì‹ ì € ì‹¤ìˆ˜ë¥¼ í•˜ì—¬ ë™ë£Œì—ê²Œ ë†€ë¦¼ì„ ë°›ì•˜ìŠµë‹ˆë‹¤." },
    { success: "ì ì‹¬ ë©”ë‰´ ì„ ì •ì— ì„±ê³µí•˜ì—¬ ëª¨ë‘ê°€ ë§Œì¡±í–ˆìŠµë‹ˆë‹¤.", fail: "ì ì‹¬ ë©”ë‰´ê°€ ë§›ì´ ì—†ì–´ ì˜¤í›„ ë‚´ë‚´ ê¸°ìš´ì´ ì—†ìŠµë‹ˆë‹¤." },
    { success: "ì›”ë§ ë³´ê³ ì„œë¥¼ ì™„ë²½í•˜ê²Œ ì‘ì„±í•´ ì œì¶œí–ˆìŠµë‹ˆë‹¤.", fail: "ì›”ë§ ë³´ê³ ì„œ íŒŒì¼ì´ ë‚ ì•„ê°€ì„œ ì•¼ê·¼ í™•ì •ì…ë‹ˆë‹¤." },

    // 11~20
    { success: "ë³µì¡í•œ ì—‘ì…€ ìˆ˜ì‹ì„ í•œ ë²ˆì— ì™„ì„±í•´ ì •ì‹œì— í‡´ê·¼í–ˆìŠµë‹ˆë‹¤.", fail: "ì—‘ì…€ íŒŒì¼ì´ ì‘ë‹µ ì—†ìŒìœ¼ë¡œ ë©ˆì¶° ì‘ì—…ë¬¼ì„ ë‚ ë ¸ìŠµë‹ˆë‹¤." },
    { success: "ì¤‘ìš”í•œ ì´ë©”ì¼ì„ ì˜¤íƒ€ í•˜ë‚˜ ì—†ì´ ì •ì¤‘í•˜ê²Œ ë³´ëƒˆìŠµë‹ˆë‹¤.", fail: "ê°œì¸ì—ê²Œ ë³´ë‚´ì•¼ í•  ë©”ì¼ì„ íŒ€ì› ì „ì²´ì—ê²Œ ë³´ë‚´ê³  ë§ì•˜ìŠµë‹ˆë‹¤." },
    { success: "í”„ë ˆì  í…Œì´ì…˜ ì¤‘ ì¢Œì¤‘ì„ ì••ë„í•˜ëŠ” ìŠ¤í”¼ì¹˜ë¥¼ ì„ ë³´ì˜€ìŠµë‹ˆë‹¤.", fail: "ë°œí‘œ ë„ì¤‘ ë¹”í”„ë¡œì í„°ê°€ êº¼ì ¸ ë‹¹í™©í–ˆìŠµë‹ˆë‹¤." },
    { success: "ì±…ìƒ ì •ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ í•˜ì—¬ ì—…ë¬´ íš¨ìœ¨ì´ ì˜¬ëìŠµë‹ˆë‹¤.", fail: "ì»¤í”¼ë¥¼ í‚¤ë³´ë“œì— ìŸì•„ ì—…ë¬´ê°€ ë§ˆë¹„ë˜ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì¶œê·¼ê¸¸ ì§€í•˜ì² ì— ë¹ˆìë¦¬ê°€ ìˆì–´ í¸í•˜ê²Œ ì™”ìŠµë‹ˆë‹¤.", fail: "ì§€ì˜¥ì² ì— ì‹œë‹¬ë¦¬ë‹¤ ì¶œê·¼ë„ ì „ì— ê¸°ë ¥ì„ ì†Œì§„í–ˆìŠµë‹ˆë‹¤." },
    { success: "ìƒˆë¡œ ì§€ê¸‰ë°›ì€ ë…¸íŠ¸ë¶ì˜ ì„±ëŠ¥ì´ ì•„ì£¼ ì¾Œì í•©ë‹ˆë‹¤.", fail: "PC ì—…ë°ì´íŠ¸ê°€ 2ì‹œê°„ì§¸ 99%ì—ì„œ ë©ˆì¶°ìˆìŠµë‹ˆë‹¤." },
    { success: "ì™¸ë¶€ ë¯¸íŒ…ì—ì„œ ëª…í•¨ì„ ì„¼ìŠ¤ ìˆê²Œ ê±´ë„¤ í˜¸ê°ì„ ìƒ€ìŠµë‹ˆë‹¤.", fail: "ê±°ë˜ì²˜ ë¯¸íŒ…ì— ëª…í•¨ì„ ì•ˆ ê°€ì ¸ì™€ì„œ ì‹ì€ë•€ì„ í˜ë ¸ìŠµë‹ˆë‹¤." },
    { success: "ë²•ì¸ì¹´ë“œë¡œ ê²°ì œí•œ ì˜ìˆ˜ì¦ ì •ë¦¬ê°€ ì™„ë²½í•©ë‹ˆë‹¤.", fail: "ì¤‘ìš”í•œ ì˜ìˆ˜ì¦ì„ ìƒì–´ë²„ë ¤ ì‚¬ë¹„ë¥¼ ì“°ê²Œ ìƒê²¼ìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‚´ êµìœ¡ì—ì„œ ìœ ìš©í•œ ìŠ¤í‚¬ì„ ë°°ì›Œ ì ìš©í–ˆìŠµë‹ˆë‹¤.", fail: "ì‚¬ë‚´ êµìœ¡ ì‹œê°„ì— ê¾¸ë²…ê¾¸ë²… ì¡¸ë‹¤ ìƒì‚¬ì™€ ëˆˆì´ ë§ˆì£¼ì³¤ìŠµë‹ˆë‹¤." },
    { success: "íŒŒì¼ ì´ë¦„ì„ ê·œì¹™ì ìœ¼ë¡œ ì •ë¦¬í•´ 1ì´ˆ ë§Œì— ì°¾ì•˜ìŠµë‹ˆë‹¤.", fail: "ìµœì¢…_ì§„ì§œìµœì¢…_ìˆ˜ì •ë³¸.fileì´ ë„ˆë¬´ ë§ì•„ í—·ê°ˆë¦½ë‹ˆë‹¤." },

    // 21~30
    { success: "ì ì‹¬ì‹œê°„ì— ì›¨ì´íŒ… ì—†ì´ ë§›ì§‘ ì…ì¥ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.", fail: "ê°€ë ¤ë˜ ì‹ë‹¹ì´ ì„ì‹œ íœ´ë¬´ë¼ í¸ì˜ì  ê¹€ë°¥ì„ ë¨¹ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì˜ìê°€ ë‚´ ëª¸ì— ë”± ë§ê²Œ ì„¸íŒ…ë˜ì–´ í—ˆë¦¬ê°€ í¸ì•ˆí•©ë‹ˆë‹¤.", fail: "ì˜ì ë†’ë‚®ì´ ì¡°ì ˆì´ ê³ ì¥ ë‚˜ì„œ ì–´ì •ì©¡í•œ ìì„¸ë¡œ ê·¼ë¬´í–ˆìŠµë‹ˆë‹¤." },
    { success: "ì—°ë§ì •ì‚° ê²°ê³¼ê°€ ì˜ˆìƒë³´ë‹¤ ì¢‹ì•„ ë³´ë„ˆìŠ¤ë¥¼ ë°›ì€ ê¸°ë¶„ì…ë‹ˆë‹¤.", fail: "ì—°ë§ì •ì‚° ì„œë¥˜ê°€ ë¯¸ë¹„í•˜ì—¬ ì„¸ë¬´íŒ€ í˜¸ì¶œì„ ë°›ì•˜ìŠµë‹ˆë‹¤." },
    { success: "íšŒì‚¬ í™”ì´ˆì— ë¬¼ì„ ì£¼ë©° ì ì‹œ ë§ˆìŒì˜ í‰í™”ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.", fail: "ì±…ìƒ ìœ„ ì„ ì¸ì¥ì„ ì³ì„œ ê°€ì‹œì— ì°”ë ¸ìŠµë‹ˆë‹¤." },
    { success: "íŒ€ì¥ë‹˜ì˜ ë¶€ì¬ë¡œ ì‚¬ë¬´ì‹¤ ë¶„ìœ„ê¸°ê°€ ììœ ë¡­ìŠµë‹ˆë‹¤.", fail: "íŒ€ì¥ë‹˜ì´ íœ´ê°€ ë³µê·€ í›„ ë°€ë¦° ì—…ë¬´ë¥¼ ìŸì•„ëƒ…ë‹ˆë‹¤." },
    { success: "ì£¼ì°¨ ìë¦¬ë¥¼ í•œ ë²ˆì— ì°¾ì•„ ê¸°ë¶„ ì¢‹ê²Œ í•˜ë£¨ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.", fail: "ì£¼ì°¨í•  ê³³ì´ ì—†ì–´ íšŒì‚¬ ì£¼ë³€ì„ ì„¸ ë°”í€´ ëŒì•˜ìŠµë‹ˆë‹¤." },
    { success: "í™”ìƒ íšŒì˜ ì—°ê²°ì´ ë§¤ë„ëŸ½ê³  í™”ì§ˆì´ ì¢‹ì•˜ìŠµë‹ˆë‹¤.", fail: "ë§ˆì´í¬ê°€ ì¼œì§„ ì¤„ ëª¨ë¥´ê³  í˜¼ì£ë§ì„ í•˜ë‹¤ ë“¤ì¼°ìŠµë‹ˆë‹¤." },
    { success: "ë°±ì—…í•´ë‘” íŒŒì¼ ë•ë¶„ì— ìœ„ê¸°ë¥¼ ëª¨ë©´í–ˆìŠµë‹ˆë‹¤.", fail: "ëœì„¬ì›¨ì–´ ë©”ì¼ì„ ëª¨ë¥´ê³  í´ë¦­í•  ë»”í–ˆìŠµë‹ˆë‹¤." },
    { success: "ì˜¤í›„ 3ì‹œì— ë‹¹ì´ ë–¨ì–´ì§ˆ ë•Œ ì´ˆì½œë¦¿ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.", fail: "ì¹´í˜ì¸ ìˆ˜í˜ˆì´ ì‹œê¸‰í•œë° ì»¤í”¼ ë¨¸ì‹ ì´ ê³ ì¥ ë‚¬ìŠµë‹ˆë‹¤." },
    { success: "ë°€ë¦° ê²°ì¬ ì„œë¥˜ë“¤ì´ ìˆœì‹ê°„ì— ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.", fail: "ê²°ì¬ ë¼ì¸ì˜ ì„ì›ë¶„ì´ ì¶œì¥ì„ ê°€ì„œ ê²°ì¬ê°€ ë©ˆì·„ìŠµë‹ˆë‹¤." },

    // 31~40
    { success: "ì‹ ì²­í•œ ì—°ì°¨ê°€ ë°”ë¡œ ìŠ¹ì¸ë˜ì–´ ì—¬í–‰ ê³„íšì„ ì§°ìŠµë‹ˆë‹¤.", fail: "ë°”ìœ ì‹œì¦Œì´ë¼ ì—°ì°¨ ì‹ ì²­ì´ ë°˜ë ¤ë˜ì–´ ì¢Œì ˆí–ˆìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ì›ì¦ì„ ë‹¨ë§ê¸°ì— ëŒ€ìë§ˆì ë¬¸ì´ ì—´ë ¤ ì¾Œì í•©ë‹ˆë‹¤.", fail: "ì‚¬ì›ì¦ì„ ì§‘ì— ë‘ê³  ì™€ì„œ ë¡œë¹„ì—ì„œ ì‹ì€ë•€ì„ í˜ë ¸ìŠµë‹ˆë‹¤." },
    { success: "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•Œë¦¼ì— ë§ì¶° ì•ˆì „í•˜ê²Œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.", fail: "ë³€ê²½í•œ ë¹„ë°€ë²ˆí˜¸ê°€ ê¸°ì–µë‚˜ì§€ ì•Šì•„ ê³„ì •ì´ ì ê²¼ìŠµë‹ˆë‹¤." },
    { success: "ì¬íƒê·¼ë¬´ ë‚ , ë†€ë¼ìš´ ì§‘ì¤‘ë ¥ìœ¼ë¡œ ì—…ë¬´ë¥¼ ëëƒˆìŠµë‹ˆë‹¤.", fail: "ì¬íƒê·¼ë¬´ ì¤‘ ì¹¨ëŒ€ì˜ ìœ í˜¹ì„ ì´ê¸°ì§€ ëª»í•˜ê³  ì ë“¤ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì‹ ì²­í•œ ì‚¬ë¬´ìš©í’ˆì´ ë¹ ë¥´ê²Œ ë„ì°©í•´ ì—…ë¬´ê°€ í¸í•´ì¡ŒìŠµë‹ˆë‹¤.", fail: "ê¸‰íˆ í•„ìš”í•œ A4 ìš©ì§€ê°€ í’ˆì ˆë˜ì–´ ì´ë©´ì§€ë¥¼ ì°¾ê³  ìˆìŠµë‹ˆë‹¤." },
    { success: "ì—˜ë¦¬ë² ì´í„°ê°€ ë°”ë¡œ ë„ì°©í•˜ì—¬ ê¸°ë‹¤ë¦¼ ì—†ì´ ì˜¬ë¼ê°”ìŠµë‹ˆë‹¤.", fail: "ì—˜ë¦¬ë² ì´í„° ì ê²€ ì¤‘ì´ë¼ 15ì¸µê¹Œì§€ ê±¸ì–´ ì˜¬ë¼ê°”ìŠµë‹ˆë‹¤." },
    { success: "í™”ì¥ì‹¤ ì²­ì†Œ ì§í›„ë¼ ë§¤ìš° ì¾Œì í•˜ê²Œ ì´ìš©í–ˆìŠµë‹ˆë‹¤.", fail: "í™”ì¥ì‹¤ì— ê°”ëŠ”ë° íœ´ì§€ê°€ ì—†ì–´ ë‚œê°í–ˆìŠµë‹ˆë‹¤." },
    { success: "íšŒì‚¬ë¡œ ì‹œí‚¨ íƒë°°ë¥¼ ì•ˆì „í•˜ê²Œ ìˆ˜ë ¹í•˜ì—¬ ê¸°ì©ë‹ˆë‹¤.", fail: "íƒë°° ë³´ê´€í•¨ ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜ë¡œ ë¬¼ê±´ì„ ëª» êº¼ëƒˆìŠµë‹ˆë‹¤." },
    { success: "ê±´ê°•ê²€ì§„ ê²°ê³¼ê°€ ëª¨ë‘ ì •ìƒì´ë¼ ì•ˆë„í–ˆìŠµë‹ˆë‹¤.", fail: "ê±´ê°•ê²€ì§„ ê²°ê³¼ ì¬ê²€ í†µë³´ë¥¼ ë°›ê³  ê±±ì •ì´ ëŠ˜ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‚´ ë™í˜¸íšŒì— ê°€ì…í•˜ì—¬ ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.", fail: "í™œë™í•˜ë˜ ë™í˜¸íšŒê°€ ì¸ì› ë¶€ì¡±ìœ¼ë¡œ íì§€ë˜ì—ˆìŠµë‹ˆë‹¤." },

    // 41~50
    { success: "ëª…ì ˆ ì„ ë¬¼ë¡œ ì›í•˜ë˜ ìµœê³ ê¸‰ ì„¸íŠ¸ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.", fail: "ëª…ì ˆ ì„ ë¬¼ë¡œ ë°›ì€ ì¹˜ì•½ ì„¸íŠ¸ê°€ í„°ì ¸ì„œ ê°€ë°©ì´ ì—‰ë§ì…ë‹ˆë‹¤." },
    { success: "ì±…ìƒì„ ì˜ˆìœ ì†Œí’ˆìœ¼ë¡œ ê¾¸ë©° ì¼í•  ë§›ì´ ë‚©ë‹ˆë‹¤.", fail: "ì±…ìƒì´ ë„ˆë¬´ ì¢ì•„ ì„œë¥˜ë¥¼ ë†“ì„ ê³µê°„ì¡°ì°¨ ì—†ìŠµë‹ˆë‹¤." },
    { success: "ì ê¹ì˜ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ë»ê·¼í•˜ë˜ ëª©ì´ ì‹œì›í•´ì¡ŒìŠµë‹ˆë‹¤.", fail: "ìŠ¤íŠ¸ë ˆì¹­ì„ í•˜ë‹¤ê°€ ë‹¤ë¦¬ì— ì¥ê°€ ë‚˜ì„œ ì†Œë¦¬ë¥¼ ì§€ë¥¼ ë»”í–ˆìŠµë‹ˆë‹¤." },
    { success: "í…€ë¸”ëŸ¬ë¥¼ ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ìƒì¾Œí•˜ê²Œ ë¬¼ì„ ë§ˆì…¨ìŠµë‹ˆë‹¤.", fail: "í…€ë¸”ëŸ¬ ëšœê»‘ì´ ëœ ë‹«í˜€ ì„œë¥˜ ìœ„ì— ë¬¼ì„ ìŸì•˜ìŠµë‹ˆë‹¤." },
    { success: "ë¹„ìƒ ì—°ë½ë§ ì—…ë°ì´íŠ¸ë¥¼ ì œë•Œ í•˜ì—¬ ê³µì§€ë¥¼ ì˜ ë°›ì•˜ìŠµë‹ˆë‹¤.", fail: "ë¹„ìƒ ì—°ë½ì²˜ê°€ ì˜›ë‚  ë²ˆí˜¸ë¼ ì¤‘ìš” ë¬¸ìë¥¼ ëª» ë°›ì•˜ìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‚´ ê²Œì‹œíŒì— ì“´ ê¸€ì´ ë² ìŠ¤íŠ¸ì— ì˜¬ë¼ ë¿Œë“¯í•©ë‹ˆë‹¤.", fail: "ìµëª… ê²Œì‹œíŒì—ì„œ ë‚´ ì–˜ê¸° ê°™ì€ ê¸€ì„ ë³´ê³  ìƒì²˜ë°›ì•˜ìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë¬´ì‹¤ ì˜¨ë„ê°€ ë”± ì ë‹¹í•˜ì—¬ ì—…ë¬´ ì§‘ì¤‘ì´ ì˜ ë©ë‹ˆë‹¤.", fail: "ì—ì–´ì»¨ì´ ë„ˆë¬´ ê°•í•´ í•œì—¬ë¦„ì— ë‹´ìš”ë¥¼ ë®ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤." },
    { success: "ë…¸ì´ì¦ˆ ìº”ìŠ¬ë§ ì´ì–´í° ë•ë¶„ì— ì†ŒìŒ ì—†ì´ ì¼í–ˆìŠµë‹ˆë‹¤.", fail: "ì¤‘ìš”í•œ ìˆœê°„ì— ì´ì–´í° ë°°í„°ë¦¬ê°€ ë°©ì „ë˜ì—ˆìŠµë‹ˆë‹¤." },
    { success: "íƒìƒ ë‹¬ë ¥ì— ì¼ì •ì„ ê¼¼ê¼¼íˆ ì ì–´ ì‹¤ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.", fail: "íœ´ì¼ì¸ ì¤„ ì•Œê³  ëŠ¦ì ì„ ìë‹¤ê°€ ì§€ê°í–ˆìŠµë‹ˆë‹¤." },
    { success: "ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë¹„ì— ë¯¸ë¦¬ ì±™ê²¨ë‘” ìš°ì‚°ì„ ì¼ìŠµë‹ˆë‹¤.", fail: "ì¼ê¸°ì˜ˆë³´ë¥¼ ì•ˆ ë³´ê³  ìš°ì‚° ì—†ì´ ë‚˜ê°”ë‹¤ ì«„ë”± ì –ì—ˆìŠµë‹ˆë‹¤." }
];

// ----------------------------------------------------------------------
// í˜‘ì—… ìŠ¤í¬ë¦½íŠ¸ (COLLAB_SCRIPTS)
// ----------------------------------------------------------------------
const COLLAB_SCRIPTS = [
    // 1~10
    { success: "í•¨ê»˜ ì•„ì´ë””ì–´ë¥¼ ëª¨ì•„ í›Œë¥­í•œ ê¸°íšì•ˆì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.", fail: "ì˜ê²¬ ì°¨ì´ê°€ ì¢í˜€ì§€ì§€ ì•Šì•„ íšŒì˜ê°€ ê¸¸ì–´ì¡ŒìŠµë‹ˆë‹¤." },
    { success: "ì—…ë¬´ ë¶„ì¥ì´ ì™„ë²½í•˜ì—¬ í”„ë¡œì íŠ¸ê°€ ì¡°ê¸° ë‹¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.", fail: "ì„œë¡œ ì¼ì„ ë¯¸ë£¨ë‹¤ê°€ ë§ˆê° ê¸°í•œì„ ë„˜ê²¼ìŠµë‹ˆë‹¤." },
    { success: "íšŒì‹ ìë¦¬ì—ì„œ ëˆëˆí•œ ë™ë£Œì• ë¥¼ ë‹¤ì¡ŒìŠµë‹ˆë‹¤.", fail: "íšŒì‹ ë©”ë‰´ ì„ ì •ë¶€í„° ì˜ê²¬ì´ ê°ˆë ¤ ë¶„ìœ„ê¸°ê°€ ëƒ‰ë­í–ˆìŠµë‹ˆë‹¤." },
    { success: "ì ì‹¬ ì‹ì‚¬ë¥¼ í•¨ê»˜í•˜ë©° ë§›ì§‘ íƒë°©ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.", fail: "ì ì‹¬ì„ ë¨¹ìœ¼ëŸ¬ ê°”ìœ¼ë‚˜ ì›¨ì´íŒ…ì´ ë„ˆë¬´ ê¸¸ì–´ í¬ê¸°í–ˆìŠµë‹ˆë‹¤." },
    { success: "ì„œë¡œì˜ ì½”ë“œë¥¼ ë¦¬ë·°í•´ì£¼ë©° ë²„ê·¸ë¥¼ ì‚¬ì „ì— ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤.", fail: "ì½”ë“œ ë¦¬ë·° ì¤‘ ìì¡´ì‹¬ ì‹¸ì›€ìœ¼ë¡œ ë²ˆì ¸ ì‚¬ì´ê°€ ì„œë¨¹í•´ì¡ŒìŠµë‹ˆë‹¤." },
    { success: "íœ´ê²Œì‹¤ì—ì„œ ë‹´ì†Œë¥¼ ë‚˜ëˆ„ë©° ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í’€ì—ˆìŠµë‹ˆë‹¤.", fail: "íœ´ê²Œì‹¤ì—ì„œ ë’·ë‹´í™”ë¥¼ í•˜ë‹¤ê°€ ë‹¹ì‚¬ìì—ê²Œ ë“¤ì¼°ìŠµë‹ˆë‹¤." },
    { success: "í›„ë°°ì—ê²Œ ì—…ë¬´ë¥¼ ì¹œì ˆíˆ ì•Œë ¤ì£¼ì–´ ì¡´ê²½ë°›ì•˜ìŠµë‹ˆë‹¤.", fail: "í›„ë°°ì—ê²Œ ì—…ë¬´ë¥¼ ì„¤ëª…í•˜ë‹¤ê°€ í—·ê°ˆë ¤ë²„ë ¸ìŠµë‹ˆë‹¤." },
    { success: "íƒ€ ë¶€ì„œì™€ì˜ í˜‘ì¡°ê°€ ì›í™œí•´ ì¼ì´ ì¼ì‚¬ì²œë¦¬ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.", fail: "íƒ€ ë¶€ì„œ ë‹´ë‹¹ìê°€ ì—°ë½ì„ ë°›ì§€ ì•Šì•„ ì†ì´ íƒ€ë“¤ì–´ ê°‘ë‹ˆë‹¤." },
    { success: "íŒ€ì›ë“¤ê³¼ ê³µë™ êµ¬ë§¤í•œ ê°„ì‹ì´ ë„ì°©í•´ íŒŒí‹°ë¥¼ ì—´ì—ˆìŠµë‹ˆë‹¤.", fail: "ëƒ‰ì¥ê³ ì— ë„£ì–´ë‘” ê°„ì‹ì„ ëˆ„êµ°ê°€ ë¨¹ì–´ë²„ë ¸ìŠµë‹ˆë‹¤." },
    { success: "ê¸´ê¸‰ íšŒì˜ì—ì„œ ëª¨ë‘ê°€ í•©ì‹¬í•˜ì—¬ í•´ê²°ì±…ì„ ë„ì¶œí–ˆìŠµë‹ˆë‹¤.", fail: "íšŒì˜ì—ì„œ ì•„ë¬´ë„ ë§ì„ í•˜ì§€ ì•Šì•„ ì •ì ë§Œ í˜ë €ìŠµë‹ˆë‹¤." },

    // 11~20
    { success: "ê³µìœ  í´ë” ì •ë¦¬ë¥¼ í•¨ê»˜í•˜ì—¬ ìë£Œ ì°¾ê¸°ê°€ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.", fail: "ëˆ„êµ°ê°€ ê³µìœ  í´ë”ì˜ ì¤‘ìš” íŒŒì¼ì„ ì‹¤ìˆ˜ë¡œ ì‚­ì œí–ˆìŠµë‹ˆë‹¤." },
    { success: "ì›Œí¬ìˆì—ì„œ íŒ€ì›Œí¬ë¥¼ ë‹¤ì§€ê³  ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.", fail: "ì›Œí¬ìˆ ì¥ê¸° ìë‘ ì••ë°•ì— ìŠ¤íŠ¸ë ˆìŠ¤ë§Œ ë°›ì•˜ìŠµë‹ˆë‹¤." },
    { success: "ë™ë£Œê°€ ì‹¤ìˆ˜ë¥¼ ì¡°ìš©íˆ ë®ì–´ì£¼ì–´ ê°ë™í–ˆìŠµë‹ˆë‹¤.", fail: "ë™ë£Œì˜ ì‹¤ìˆ˜ë¥¼ ìˆ˜ìŠµí•˜ëŠë¼ ì—…ë¬´ë¥¼ ëª» í–ˆìŠµë‹ˆë‹¤." },
    { success: "ìŠ¤ì¼€ì¤„ ì¡°ìœ¨ì´ ì™„ë²½í•˜ì—¬ ì „ì› ì°¸ì„ íšŒì˜ê°€ ì„±ì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.", fail: "íšŒì˜ ì‹œê°„ì„ ì¡ìœ¼ë ¤ë‹¤ ìŠ¤ì¼€ì¤„ ì¡°ìœ¨ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤." },
    { success: "ì¹­ì°¬ ë¦´ë ˆì´ë¥¼ í†µí•´ íŒ€ ë¶„ìœ„ê¸°ê°€ í›ˆí›ˆí•´ì¡ŒìŠµë‹ˆë‹¤.", fail: "ìµëª… ê±´ì˜í•¨ì— ì„œë¡œë¥¼ ë¹„ë‚œí•˜ëŠ” ìª½ì§€ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‹¤ë¦¬ íƒ€ê¸° ê²Œì„ìœ¼ë¡œ ì»¤í”¼ ë‚´ê¸°ë¥¼ í•˜ì—¬ ì¦ê±°ì› ìŠµë‹ˆë‹¤.", fail: "ì»¤í”¼ ë‚´ê¸°ì— ê±¸ë¦° ì‚¬ëŒì˜ ì§€ê°‘ì´ ì–‡ì•„ì¡ŒìŠµë‹ˆë‹¤." },
    { success: "í•¨ê»˜ ì•¼ê·¼í•˜ë©° ì „ìš°ì• ê°€ ìƒê²¼ìŠµë‹ˆë‹¤.", fail: "ëˆˆì¹˜ ê²Œì„ì„ í•˜ë‹¤ê°€ í•œ ëª…ë§Œ ë‚¨ê³  ëª¨ë‘ê°€ í‡´ê·¼í–ˆìŠµë‹ˆë‹¤." },
    { success: "ê²½ìŸ PTì—ì„œ íŒ€ì›ë“¤ì˜ í•©ì´ ë‹ë³´ì˜€ìŠµë‹ˆë‹¤.", fail: "ë°œí‘œìì™€ ìë£Œ ë„˜ê¸°ëŠ” ì‚¬ëŒì˜ í˜¸í¡ì´ ì•ˆ ë§ì•„ ì‚ê±±ëŒ”ìŠµë‹ˆë‹¤." },
    { success: "ì¸ìˆ˜ì¸ê³„ ë¬¸ì„œë¥¼ ì™„ë²½í•˜ê²Œ ë§Œë“¤ì–´ í›„ì„ì´ ê°ë™í–ˆìŠµë‹ˆë‹¤.", fail: "ì¸ìˆ˜ì¸ê³„ ë‚´ìš©ì´ ë¶€ì‹¤í•˜ì—¬ ì´ì§ í›„ì—ë„ ì—°ë½ì´ ì™”ìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‚´ ì²´ìœ¡ëŒ€íšŒì—ì„œ ìš°ë¦¬ íŒ€ì´ ìš°ìŠ¹í•˜ì—¬ ìƒê¸ˆì„ íƒ”ìŠµë‹ˆë‹¤.", fail: "ì²´ìœ¡ëŒ€íšŒì—ì„œ ì˜ìš•ì´ ì•ì„œ ë„˜ì–´ì ¸ ë¶€ìƒì„ ì…ì—ˆìŠµë‹ˆë‹¤." },

    // 21~30
    { success: "íŒ€ ë‹¨ì²´ ë´‰ì‚¬í™œë™ì„ í†µí•´ ë³´ëŒì°¬ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.", fail: "ì£¼ë§ ë´‰ì‚¬í™œë™ì— ê°•ì œ ë™ì›ë˜ì–´ ë¶ˆë§Œì´ í­ì£¼í–ˆìŠµë‹ˆë‹¤." },
    { success: "ë™ë£Œì˜ ê²½ì¡°ì‚¬ë¥¼ í•¨ê»˜ ì±™ê²¨ì£¼ë©° ë§ˆìŒì„ ë‚˜ëˆ´ìŠµë‹ˆë‹¤.", fail: "ì¶•ì˜ê¸ˆ ë´‰íˆ¬ì— ì´ë¦„ì„ ì•ˆ ì“°ê³  ë‚´ì„œ ê³¤ë€í•´ì¡ŒìŠµë‹ˆë‹¤." },
    { success: "ì‚¬ë‚´ ìŠ¤í„°ë”” ê·¸ë£¹ì„ ë§Œë“¤ì–´ í•¨ê»˜ ì„±ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.", fail: "ìŠ¤í„°ë”” ê·¸ë£¹ì´ ë§›ì§‘ íƒë°© ëª¨ì„ìœ¼ë¡œ ë³€ì§ˆë˜ì—ˆìŠµë‹ˆë‹¤." },
    { success: "íšŒì˜ì‹¤ ì˜ˆì•½ì— ì„±ê³µí•˜ì—¬ ì¾Œì í•œ í™˜ê²½ì—ì„œ íšŒì˜í–ˆìŠµë‹ˆë‹¤.", fail: "íšŒì˜ì‹¤ì„ ë”ë¸” ë¶€í‚¹ í•˜ëŠ” ë°”ëŒì— ë³µë„ì—ì„œ íšŒì˜í–ˆìŠµë‹ˆë‹¤." },
    { success: "í”„ë¡œì íŠ¸ íšŒê³  ì‹œê°„ì— ê±´ì„¤ì ì¸ í”¼ë“œë°±ì´ ì˜¤ê°”ìŠµë‹ˆë‹¤.", fail: "íšŒê³  ì‹œê°„ì´ ì„œë¡œ íƒ“ì„ í•˜ëŠ” ì²­ë¬¸íšŒ ìë¦¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤." },
    { success: "ì›Œí¬ìˆ ì¥ê¸°ìë‘ì—ì„œ 1ë“±ì„ í•˜ì—¬ ë¶„ìœ„ê¸° ë©”ì´ì»¤ê°€ ëìŠµë‹ˆë‹¤.", fail: "ì¥ê¸°ìë‘ ë°˜ì‘ì´ ì‹¸ëŠ˜í•˜ì—¬ ë§ˆìŒì´ ë¶ˆí¸í–ˆìŠµë‹ˆë‹¤." },
    { success: "ë™ë£Œë¥¼ ìœ„í•œ ë¡¤ë§í˜ì´í¼ì— ê°ë™ì ì¸ ë©”ì‹œì§€ë¥¼ ì ì—ˆìŠµë‹ˆë‹¤.", fail: "ë¡¤ë§í˜ì´í¼ì— ì ì„ ë§ì´ ì—†ì–´ â€˜í–‰ë³µí•˜ì„¸ìš”â€™ë§Œ ì¼ìŠµë‹ˆë‹¤." },
    { success: "ì ì‹¬ì‹œê°„ì— ë‹¤ ê°™ì´ ì‚°ì±…í•˜ë©° ì¬ì¶©ì „í–ˆìŠµë‹ˆë‹¤.", fail: "ì‚°ì±…ì„ ë‚˜ê°”ë‹¤ê°€ ë¯¸ì„¸ë¨¼ì§€ë§Œ ì”ëœ© ë§ˆì‹œê³  ë“¤ì–´ì™”ìŠµë‹ˆë‹¤." },
    { success: "íŒ€ ë‹¨ì²´ í‹°ì…”ì¸ ë¥¼ ë§ì¶° ì…ê³  ë‹¨í•©ë ¥ì„ ê³¼ì‹œí–ˆìŠµë‹ˆë‹¤.", fail: "ë‹¨ì²´ í‹°ì…”ì¸  ë””ìì¸ì´ ë„ˆë¬´ ì´ŒìŠ¤ëŸ¬ì›Œ ì…ê¸° ë¶€ë„ëŸ½ìŠµë‹ˆë‹¤." },
    { success: "ë´„ë§ì´ ì•¼ìœ íšŒ ë‚ ì”¨ê°€ ì¢‹ì•„ ì¸ìƒ ì‚¬ì§„ì„ ê±´ì¡ŒìŠµë‹ˆë‹¤.", fail: "ì•¼ìœ íšŒ ë‚  ë¹„ê°€ ìŸì•„ì ¸ ì‹¤ë‚´ì—ì„œë§Œ ê°‡í˜€ ìˆì—ˆìŠµë‹ˆë‹¤." }
];

// --- Game State ---

const MAX_COMPANY_COUNT = 6;
let state = {
    day: 1,
    money: 1000000,
    companyCount: 3,
    companies: [],
    characters: [],
    stocks: {},
    nextId: 1
};

// --- Initialization ---

function init() {
    setupUI();
    createCompanies(state.companyCount);
    updateDisplay();
}

function setupUI() {
    const mbtiSelect = document.getElementById('new-mbti');
    MBTI_TYPES.forEach(t => {
        const op = document.createElement('option');
        op.value = t;
        op.innerText = t;
        mbtiSelect.appendChild(op);
    });

    const rankSelect = document.getElementById('new-rank');
    RANKS.forEach((r, idx) => {
        const op = document.createElement('option');
        op.value = idx;
        op.innerText = r.title;
        rankSelect.appendChild(op);
    });
}

function createCompanies(count) {
    state.companies = [];
    state.companyCount = count;
    for (let i = 0; i < count; i++) {
        const price = Math.floor(Math.random() * 30000) + 20000;
        state.companies.push({
            id: i,
            name: `Company ${String.fromCharCode(65 + i)}`,
            price: price,
            prevPrice: price,
            color: COLORS[i % COLORS.length]
        });
        state.stocks[i] = { count: 0, cost: 0 };
    }
    renderCompanySelect();
    renderMap();
}

function changeCompanyCount(delta) {
    const newCount = state.companies.length + delta;
    if (newCount < 1) {
        alert("ìµœì†Œ 1ê°œì˜ íšŒì‚¬ëŠ” ìˆì–´ì•¼ í•©ë‹ˆë‹¤.");
        return;
    }
    if (newCount > MAX_COMPANY_COUNT) {
        alert(`ìµœëŒ€ ${MAX_COMPANY_COUNT}ê°œê¹Œì§€ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
        return;
    }

    if (delta > 0) {
        // Add Company
        const i = state.companies.length;
        const price = Math.floor(Math.random() * 30000) + 20000;
        state.companies.push({
            id: i,
            name: `Company ${String.fromCharCode(65 + i)}`,
            price: price,
            prevPrice: price,
            color: COLORS[i % COLORS.length]
        });
        state.stocks[i] = { count: 0, cost: 0 };
    } else {
        // Remove Company
        const removedCompany = state.companies.pop();
        delete state.stocks[removedCompany.id];
        
        // Fire employees
        const fireList = state.characters.filter(c => c.companyId === removedCompany.id);
        state.characters = state.characters.filter(c => c.companyId !== removedCompany.id);
        if(fireList.length > 0) {
            addLog('system', `${removedCompany.name}ì˜ íì—…ìœ¼ë¡œ ${fireList.length}ëª…ì´ í•´ê³ ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }
    }
    
    state.companyCount = state.companies.length;
    renderCompanySelect();
    renderMap();
    renderRoster();
}

function renderCompanySelect() {
    const companySelect = document.getElementById('new-company');
    companySelect.innerHTML = '';
    state.companies.forEach(c => {
        const op = document.createElement('option');
        op.value = c.id;
        op.innerText = c.name;
        companySelect.appendChild(op);
    });
}

// --- Helpers ---

function getRandomItem(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function getCompatibility(mbti1, mbti2) {
    if (!COMPATIBILITY_DATA[mbti1]) return 3;
    return COMPATIBILITY_DATA[mbti1][mbti2] || 3;
}

// Helper to handle old vs new stock data structure
function getStockData(companyId) {
    let stock = state.stocks[companyId];
    if (typeof stock === 'number') {
        // Migrate old data
        const count = stock;
        stock = { count: count, cost: 0 };
        state.stocks[companyId] = stock;
    }
    if (!stock) {
        stock = { count: 0, cost: 0 };
        state.stocks[companyId] = stock;
    }
    return stock;
}

// --- Character Logic ---

function addCharacter() {
    if (state.characters.length >= 30) {
        alert("ì „ì²´ ì§ì› ìˆ˜ëŠ” 30ëª…ì„ ë„˜ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
    }

    const nameInput = document.getElementById('new-name');
    const mbtiInput = document.getElementById('new-mbti');
    const companyInput = document.getElementById('new-company');
    const rankInput = document.getElementById('new-rank');
    
    const name = nameInput.value.trim();
    if(state.companies.length === 0) return;
    const companyId = parseInt(companyInput.value);

    if (!name || !mbtiInput.value) {
        alert("ì´ë¦„ê³¼ MBTIë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
    }

    const exists = state.characters.some(c => c.companyId === companyId && c.name === name);
    if (exists) {
        alert("ê°™ì€ íšŒì‚¬ ë‚´ì— ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.");
        return;
    }

    const char = {
        id: state.nextId++,
        name: name,
        mbti: mbtiInput.value,
        companyId: companyId,
        rankIdx: parseInt(rankInput.value),
        xp: 0,
        affinity: {},
        partnerId: null,
        status: 'normal',
        lastAction: ''
    };

    state.characters.push(char);
    addLog('system', `${char.name}ë‹˜(${char.mbti})ì´ ${state.companies[char.companyId].name}ì˜ ${RANKS[char.rankIdx].title}(ìœ¼)ë¡œ ì…ì‚¬í–ˆìŠµë‹ˆë‹¤.`);
    nameInput.value = '';
    
    renderRoster();
    renderMap();
}

// --- Next Day Logic ---

function nextDay() {
    state.day++;
    
    const news = getRandomItem(NEWS_DATA);
    let stockMod = 0;
    let newsLogType = 'log-news-neutral';

    addLog(newsLogType.replace('log-', ''), `[Day ${state.day}] ${news.text}`);

    let companyPerformance = {};
    state.companies.forEach(c => companyPerformance[c.id] = 0);
    
    const totalSalary = state.characters.reduce((sum, char) => sum + RANKS[char.rankIdx].salary, 0);

    const processedChars = new Set();
    state.characters.forEach(c => c.status = 'normal');

    const shuffled = [...state.characters].sort(() => Math.random() - 0.5);

    shuffled.forEach(char => {
        if (processedChars.has(char.id)) return;

        processedChars.add(char.id);

        if (Math.random() < 0.1) {
            char.status = 'late';
            companyPerformance[char.companyId] -= 2;
        } else {
            char.status = 'working';
        }

        const roll = Math.random() * 100;
        
        if (roll < 40) {
            const sameCompany = state.characters.filter(c => c.companyId === char.companyId && !processedChars.has(c.id));
            if (sameCompany.length >= 1) {
                const partnerCount = Math.min(sameCompany.length, Math.floor(Math.random() * 3) + 1);
                const partners = sameCompany.slice(0, partnerCount);
                
                const isSuccess = Math.random() < 0.7;
                const script = getRandomItem(COLLAB_SCRIPTS);
                const names = [char.name, ...partners.map(p => p.name)].join(', ');

                partners.forEach(p => processedChars.add(p.id));
                const allParticipants = [char, ...partners];

                if(isSuccess) {
                    addLog('collab-success', `[ì‚¬ë‚´í˜‘ì—…/ì„±ê³µ] ${names}: ${script.success}`);
                    allParticipants.forEach(c => {
                        companyPerformance[c.companyId] += 2;
                        c.xp += 6;
                    });
                    updateGroupAffinity(allParticipants, true);
                } else {
                    addLog('collab-fail', `[ì‚¬ë‚´í˜‘ì—…/ì‹¤íŒ¨] ${names}: ${script.fail}`);
                    allParticipants.forEach(c => {
                        companyPerformance[c.companyId] -= 1;
                        c.xp = Math.max(0, c.xp - 5);
                    });
                    updateGroupAffinity(allParticipants, false);
                }
                return;
            }
        }
        
        if (roll >= 40 && roll < 50) {
            const otherCompany = state.characters.filter(c => c.companyId !== char.companyId && !processedChars.has(c.id));
            if (otherCompany.length >= 1) {
                 const partnerCount = Math.min(otherCompany.length, Math.floor(Math.random() * 3) + 1);
                 const partners = otherCompany.slice(0, partnerCount);

                 const isSuccess = Math.random() < 0.6;
                 const script = getRandomItem(COLLAB_SCRIPTS);
                 const names = [char.name, ...partners.map(p => `${p.name}(${state.companies[p.companyId].name})`)].join(', ');
                 
                 partners.forEach(p => processedChars.add(p.id));
                 const allParticipants = [char, ...partners];

                 if(isSuccess) {
                     addLog('collab-success', `[ì™¸ë¶€ë¯¸íŒ…/ì„±ê³µ] ${names}: ${script.success}`);
                     allParticipants.forEach(c => {
                        companyPerformance[c.companyId] += 3; 
                        c.xp += 10;
                     });
                     updateGroupAffinity(allParticipants, true);
                 } else {
                     addLog('collab-fail', `[ì™¸ë¶€ë¯¸íŒ…/ì‹¤íŒ¨] ${names}: ${script.fail}`);
                     allParticipants.forEach(c => {
                        companyPerformance[c.companyId] -= 1;
                        c.xp = Math.max(0, c.xp - 5);
                     });
                     updateGroupAffinity(allParticipants, false);
                 }
                 return;
            }
        }

        const success = Math.random() < 0.6;
        const scriptData = getRandomItem(WORK_SCRIPTS);
        
        if (success) {
            char.xp += 10;
            companyPerformance[char.companyId] += 1;
            addLog('work-success', `${char.name}: ${scriptData.success}`);
        } else {
            companyPerformance[char.companyId] -= 1;
            char.xp = Math.max(0, char.xp - 5);
            addLog('work-fail', `${char.name}: ${scriptData.fail}`);
        }
    });

    checkPromotionsAndLove();
    updateDisplay();
    renderRoster();
    renderMap();
}

function updateGroupAffinity(group, isProjectSuccess) {
    for (let i = 0; i < group.length; i++) {
        for (let j = i + 1; j < group.length; j++) {
            processInteraction(group[i], group[j], isProjectSuccess);
        }
    }
}

function processInteraction(char1, char2, isProjectSuccess) {
    const compScore = getCompatibility(char1.mbti, char2.mbti);
    
    let delta = 0;
    let successChance = compScore * 15;
    if (isProjectSuccess) successChance += 30;
    else successChance -= 30;
    
    if (Math.random() * 100 < successChance) {
        delta = (compScore * 2) + Math.floor(Math.random() * 10) + 1;
        if(isProjectSuccess) delta += 5;
    } else {
        delta = -1 * ((6 - compScore) * 2 + Math.floor(Math.random() * 10) + 1);
        if(!isProjectSuccess) delta -= 5;
    }

    const current1 = char1.affinity[char2.id] || 0;
    const current2 = char2.affinity[char1.id] || 0;
    
    char1.affinity[char2.id] = Math.max(-100, Math.min(100, current1 + delta));
    char2.affinity[char1.id] = Math.max(-100, Math.min(100, current2 + delta));
}

function checkPromotionsAndLove() {
    state.characters.forEach(char => {
        if (char.xp >= RANKS[char.rankIdx].limit) {
            if (char.rankIdx < RANKS.length - 1) {
                char.rankIdx++;
                char.xp = 0;
                addLog('system', `ì¶•í•˜í•©ë‹ˆë‹¤! ${char.name}ë‹˜ì´ ${RANKS[char.rankIdx].title}(ìœ¼)ë¡œ ìŠ¹ì§„í–ˆìŠµë‹ˆë‹¤!`);
            } else {
                char.rankIdx = 0;
                char.xp = 0;
                addLog('system', `${char.name} ì´ì‚¬ë‹˜ì´ ì‹ ì… ì‚¬ì›ìœ¼ë¡œ ìœ„ì¥ ì·¨ì—…ì„ í•˜ì…¨ìŠµë‹ˆë‹¤!`);
            }
        }

        if (!char.partnerId) {
            for (const [targetIdStr, score] of Object.entries(char.affinity)) {
                const targetId = parseInt(targetIdStr);
                const target = state.characters.find(c => c.id === targetId);
                
                if (target && !target.partnerId && score >= 80) {
                    if (Math.random() < 0.1) {
                        char.partnerId = targetId;
                        target.partnerId = char.id;
                        addLog('love', `ğŸ’– ${char.name}ë‹˜ê³¼ ${target.name}ë‹˜ì´ ì—°ì• ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤! (ì¹œë°€ë„: ${score})`);
                        break; 
                    }
                }
            }
        } else {
            const score = char.affinity[char.partnerId];
            if (score < 60) {
                const partner = state.characters.find(c => c.id === char.partnerId);
                char.partnerId = null;
                if(partner) partner.partnerId = null;
                addLog('love', `ğŸ’” ${char.name}ë‹˜ê³¼ ${partner ? partner.name : 'ìƒëŒ€'}ë‹˜ì´ í—¤ì–´ì¡ŒìŠµë‹ˆë‹¤.`);
            }
        }
    });
}

// --- UI Functions ---

function switchTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(el => {
        el.classList.remove('active-tab', 'text-indigo-600', 'border-indigo-600');
        el.classList.add('text-gray-500', 'border-transparent');
    });
    
    document.getElementById(tabId).classList.add('active');
    const activeBtn = document.querySelector(`button[data-tab="${tabId}"]`);
    if(activeBtn) {
        activeBtn.classList.add('text-indigo-600', 'border-indigo-600');
        activeBtn.classList.remove('text-gray-500', 'border-transparent');
    }
}

function addLog(type, text) {
    const container = document.getElementById('log-container');
    const entry = document.createElement('div');
    entry.className = `log-entry log-${type}`;
    entry.innerText = text;
    container.prepend(entry);
    if (container.children.length > 100) container.removeChild(container.lastChild);
}

function clearLogs() {
    document.getElementById('log-container').innerHTML = '';
}

function updateDisplay() {
    document.getElementById('day-display').innerText = state.day;
}

// --- Save / Load / Import / Export ---

function saveData(type) {
    const data = createSaveData(type);
    if (type === 'basic') {
        localStorage.setItem('officeSim_basic', JSON.stringify(data));
        alert('ê¸°ë³¸ ë°ì´í„°ê°€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } else {
        localStorage.setItem('officeSim_full', JSON.stringify(data));
        alert('ì „ì²´ ë°ì´í„°ê°€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
}

function loadData(type) {
    const key = type === 'basic' ? 'officeSim_basic' : 'officeSim_full';
    const dataStr = localStorage.getItem(key);
    if (!dataStr) {
        alert('ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    if(!confirm("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ í˜„ì¬ ì§„í–‰ ìƒí™©ì´ ë®ì–´ì”Œì›Œì§‘ë‹ˆë‹¤. ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    
    const data = JSON.parse(dataStr);
    applySaveData(type, data);
}

function exportJSON(type) {
    const data = createSaveData(type);
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `office_sim_${type}_${new Date().toISOString().slice(0,10)}.json`;
    a.click();
    URL.revokeObjectURL(url);
}

function importJSON(type) {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'application/json';
    input.onchange = e => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = event => {
            try {
                const data = JSON.parse(event.target.result);
                if(!confirm("íŒŒì¼ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ í˜„ì¬ ì§„í–‰ ìƒí™©ì´ ë®ì–´ì”Œì›Œì§‘ë‹ˆë‹¤. ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
                applySaveData(type, data);
            } catch (err) {
                alert('íŒŒì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        };
        reader.readAsText(file);
    };
    input.click();
}

function createSaveData(type) {
    if (type === 'basic') {
        return {
            companies: state.companies.map(c => ({ id: c.id, name: c.name, color: c.color })),
            characters: state.characters.map(c => ({ 
                name: c.name, 
                mbti: c.mbti, 
                companyId: c.companyId, 
                rankIdx: c.rankIdx 
            }))
        };
    } else {
        return state;
    }
}

function applySaveData(type, data) {
    if (type === 'basic') {
        // Reset State
        state.day = 1;
        state.money = 1000000;
        state.companies = [];
        state.stocks = {};
        state.characters = [];
        state.nextId = 1;

        data.companies.forEach(c => {
            const price = Math.floor(Math.random() * 30000) + 20000;
            state.companies.push({
                id: c.id,
                name: c.name,
                price: price,
                prevPrice: price,
                color: c.color || COLORS[c.id % COLORS.length]
            });
            state.stocks[c.id] = { count: 0, cost: 0 };
        });
        state.companyCount = state.companies.length;

        data.characters.forEach(c => {
             state.characters.push({
                id: state.nextId++,
                name: c.name,
                mbti: c.mbti,
                companyId: c.companyId,
                rankIdx: c.rankIdx,
                xp: 0,
                affinity: {},
                partnerId: null,
                status: 'normal',
                lastAction: ''
            });
        });

        clearLogs();
        addLog('system', 'ê¸°ë³¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.');

    } else {
        state = data;
        // Fix stock structure if old format
        state.companies.forEach(c => {
            if(typeof state.stocks[c.id] === 'number') {
                state.stocks[c.id] = { count: state.stocks[c.id], cost: 0 };
            }
        });
        
        clearLogs();
        addLog('system', `Day ${state.day} ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`);
    }
    
    updateDisplay();
    renderRoster();
    renderMap();
    renderCompanySelect();
}

// --- Roster & Modal ---

function renderRoster() {
    const list = document.getElementById('roster-list');
    list.innerHTML = '';
    
    state.characters.forEach(char => {
        const company = state.companies.find(c => c.id === char.companyId);
        if(!company) return;

        const card = document.createElement('div');
        card.className = "bg-white p-3 rounded shadow flex justify-between items-center cursor-pointer hover:bg-gray-50";
        card.ondblclick = () => openAffinityModal(char.id);
        
        let partnerText = "";
        if (char.partnerId) {
            const partner = state.characters.find(c => c.id === char.partnerId);
            if(partner) partnerText = `<span class="text-pink-500 text-xs ml-2">â™¥ ${partner.name}</span>`;
        }

        card.innerHTML = `
            <div>
                <div class="font-bold flex items-center">
                    <span class="w-2 h-2 rounded-full ${company.color.bg} mr-2"></span>
                    ${char.name} 
                    <span class="text-xs text-gray-500 ml-1">(${char.mbti})</span>
                    ${partnerText}
                </div>
                <div class="text-xs text-gray-600">
                    ${company.name} | ${RANKS[char.rankIdx].title} | Exp: ${char.xp}/${RANKS[char.rankIdx].limit}
                </div>
            </div>
            <div class="text-right">
                <button onclick="event.stopPropagation(); fireCharacter(${char.id})" class="text-xs text-red-400 border border-red-200 px-2 py-1 rounded hover:bg-red-50">í•´ê³ </button>
            </div>
        `;
        list.appendChild(card);
    });
}

function fireCharacter(id) {
    if(confirm("ì •ë§ í•´ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        state.characters = state.characters.filter(c => c.id !== id);
        state.characters.forEach(c => {
            if(c.partnerId === id) c.partnerId = null;
            delete c.affinity[id];
        });
        renderRoster();
        renderMap();
    }
}

function openAffinityModal(charId) {
    const char = state.characters.find(c => c.id === charId);
    if(!char) return;

    const modal = document.getElementById('affinity-modal');
    const body = document.getElementById('modal-body');

    document.getElementById('modal-title').innerText = `${char.name}ë‹˜ì˜ ì¸ë§¥ í˜„í™©`;
    
    let html = `<table class="w-full text-sm text-left">
        <thead class="bg-gray-100 font-bold">
            <tr>
                <th class="p-2">ëŒ€ìƒ</th>
                <th class="p-2">ì†Œì†</th>
                <th class="p-2">MBTI</th>
                <th class="p-2">ê¶í•©</th>
                <th class="p-2">ì¹œë°€ë„</th>
            </tr>
        </thead>
        <tbody>`;
    
    const others = state.characters.filter(c => c.id !== char.id && char.affinity[c.id] !== undefined);
    
    if(others.length === 0) {
        html += `<tr><td colspan="5" class="p-4 text-center text-gray-500">ì•„ì§ êµë¥˜í•œ ì‚¬ëŒì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
    }

    others.forEach(target => {
        const score = char.affinity[target.id];
        const comp = getCompatibility(char.mbti, target.mbti);
        const compColor = comp >= 4 ? 'text-green-600' : (comp <= 2 ? 'text-red-500' : 'text-gray-600');
        const scoreColor = score > 0 ? 'text-blue-600' : (score < 0 ? 'text-red-600' : 'text-gray-600');
        
        let rowBg = "";
        if(char.partnerId === target.id) rowBg = "bg-pink-50";

        const targetCompany = state.companies.find(c => c.id === target.companyId);

        html += `<tr class="border-b ${rowBg}">
            <td class="p-2 font-medium">${target.name}</td>
            <td class="p-2 text-xs">${targetCompany ? targetCompany.name : 'Unknown'}</td>
            <td class="p-2 text-xs">${target.mbti}</td>
            <td class="p-2 font-bold ${compColor}">${comp}ì </td>
            <td class="p-2 font-bold ${scoreColor}">${score}</td>
        </tr>`;
    });
    
    html += `</tbody></table>`;
    body.innerHTML = html;
    modal.style.display = 'block';
}

function closeModal() {
    document.getElementById('affinity-modal').style.display = 'none';
}

window.onclick = function(event) {
    const modal = document.getElementById('affinity-modal');
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

// --- Map & Renaming ---

function renderMap() {
    const container = document.getElementById('map-container');
    container.innerHTML = '';

    state.companies.forEach(comp => {
        const building = document.createElement('div');
        building.className = `company-building flex flex-col`;
        
        const header = document.createElement('div');
        header.className = `${comp.color.bg} text-white p-2 text-center font-bold text-sm h-10 flex items-center justify-center`;
        header.id = `comp-header-${comp.id}`;
        header.ondblclick = () => startEditCompany(comp.id);
        header.innerText = comp.name;
        
        building.appendChild(header);

        const reversedRanks = [...RANKS].reverse();
        reversedRanks.forEach((rank, idx) => {
            const actualRankIdx = RANKS.length - 1 - idx;
            const floor = document.createElement('div');
            floor.className = "floor bg-white";
            
            const chars = state.characters.filter(c => c.companyId === comp.id && c.rankIdx === actualRankIdx);
            
            chars.forEach(c => {
                const charEl = document.createElement('div');
                charEl.className = `char-icon ${comp.color.bg} shadow-md hover:scale-110 transition`;
                charEl.title = `${c.name} (${c.mbti})\nìƒíƒœ: ${c.status}`;
                charEl.innerText = c.name[0];
                
                if (c.status === 'late') {
                    charEl.innerHTML += `<div class="char-status bg-red-500"></div>`;
                } else if (c.partnerId) {
                     charEl.innerHTML += `<div class="char-status bg-pink-500"></div>`;
                } else {
                    charEl.innerHTML += `<div class="char-status bg-green-400"></div>`;
                }
                floor.appendChild(charEl);
            });

            const label = document.createElement('div');
            label.className = "floor-label";
            label.innerText = rank.title + "ì¸µ";
            floor.appendChild(label);
            building.appendChild(floor);
        });

        container.appendChild(building);
    });
}

function startEditCompany(id) {
    const header = document.getElementById(`comp-header-${id}`);
    const comp = state.companies.find(c => c.id === id);
    if(!comp) return;

    const currentName = comp.name;
    header.innerHTML = '';
    const input = document.createElement('input');
    input.type = 'text';
    input.value = currentName;
    input.className = 'editable-input';
    input.onblur = () => saveCompany(id, input.value);
    input.onkeypress = (e) => { if(e.key === 'Enter') input.blur(); };
    header.appendChild(input);
    input.focus();
}

function saveCompany(id, newName) {
    const comp = state.companies.find(c => c.id === id);
    if(comp && newName.trim()) {
        comp.name = newName.trim();
    }
    renderMap();
    renderCompanySelect();
    renderRoster();
}

init();

</script>
</body>
</html>
